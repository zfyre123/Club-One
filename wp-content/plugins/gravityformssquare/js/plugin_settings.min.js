window.GFSquareSettings=null,function(u){GFSquareSettings=function(){var a=this;this.init=function(){this.pageURL=gform_square_pluginsettings_strings.settings_url,this.deauthActionable=!1,this.setUpdateButtonDisplay(),this.bindDeauthorize(),this.bindCustomAppLinks(),this.bindModeChange()},this.bindDeauthorize=function(){u(".deauth_button").on("click",function(t){t.preventDefault();var s=u("#gform_square_deauth_button"),e=u("#deauth_scope"),n=gform_square_pluginsettings_strings.disconnect;if(a.deauthActionable){var i=u("#deauth_scope0").is(":checked")?"site":"account";if(!confirm(n[i]))return!1;s.attr("disabled","disabled"),u.ajax({async:!1,url:ajaxurl,dataType:"json",method:"POST",data:{action:"gfsquare_deauthorize",scope:i,nonce:gform_square_pluginsettings_strings.deauth_nonce},success:function(t){t.success?window.location.href=a.pageURL:alert(t.data.message),s.removeAttr("disabled")}}).fail(function(t,e,n){alert(n),s.removeAttr("disabled")})}else u(".deauth_button").eq(0).hide(),e.show("slow",function(){a.deauthActionable=!0})})},this.setUpdateButtonDisplay=function(){u(".deauth_button").length||"1"==u("input#custom_app_"+gform_square_pluginsettings_strings.mode).val()||u("#tab_gravityformssquare table tr:last-child").css("display","none")},this.bindCustomAppLinks=function(){u("#gform_square_enable_custom_app").on("click",function(t){t.preventDefault(),u("input#custom_app_"+gform_square_pluginsettings_strings.mode).val("1"),u("#gform-settings-save").trigger("click")}),u("#gform_square_disable_custom_app").on("click",function(t){t.preventDefault(),u("input#custom_app_"+gform_square_pluginsettings_strings.mode).val(""),u("#gform-settings-save").trigger("click")})},this.bindModeChange=function(){u(".square_mode").change(function(){u("#gform-settings-save").trigger("click")})},this.init()},u(document).ready(GFSquareSettings)}(jQuery);
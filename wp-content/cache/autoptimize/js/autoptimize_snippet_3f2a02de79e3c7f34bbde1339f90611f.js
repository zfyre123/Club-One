tribe.events=tribe.events||{};tribe.events.views=tribe.events.views||{};tribe.events.views.multidayEvents={};(function($,obj){'use strict';var $document=$(document);obj.selectors={};obj.selectorPrefixes={month:'.tribe-events-calendar-month__',};obj.selectorSuffixes={multidayEvent:'multiday-event',hiddenMultidayEvent:'multiday-event-hidden',multidayEventBarInner:'multiday-event-bar-inner',multidayEventBarInnerFocus:'multiday-event-bar-inner--focus',multidayEventBarInnerHover:'multiday-event-bar-inner--hover',};obj.findVisibleMultidayEvents=function($container,$hiddenMultidayEvent){var eventId=$hiddenMultidayEvent.closest(obj.selectors.multidayEvent).data('event-id');return $container.find(obj.selectors.multidayEvent+'[data-event-id='+eventId+']')};obj.toggleHoverClass=function(event){event.data.target.toggleClass(obj.selectors.multidayEventBarInnerHover.className());};obj.toggleFocusClass=function(event){event.data.target.toggleClass(obj.selectors.multidayEventBarInnerFocus.className());};obj.unbindMultidayEvents=function($container){var $hiddenMultidayEvents=$container.find(obj.selectors.hiddenMultidayEvent);$hiddenMultidayEvents.each(function(hiddenIndex,hiddenMultidayEvent){$(hiddenMultidayEvent).off();});};obj.bindMultidayEvents=function($container){var $hiddenMultidayEvents=$container.find(obj.selectors.hiddenMultidayEvent);$hiddenMultidayEvents.each(function(hiddenIndex,hiddenMultidayEvent){var $hiddenMultidayEvent=$(hiddenMultidayEvent);var $visibleMultidayEvents=obj.findVisibleMultidayEvents($container,$hiddenMultidayEvent);$visibleMultidayEvents.each(function(visibleIndex,visibleMultidayEvent){var $visibleMultidayEvent=$(visibleMultidayEvent);var $visiblemultidayEventBarInner=$visibleMultidayEvent.find(obj.selectors.multidayEventBarInner);$hiddenMultidayEvent.on('mouseenter mouseleave',{target:$visiblemultidayEventBarInner},obj.toggleHoverClass).on('focus blur',{target:$visiblemultidayEventBarInner},obj.toggleFocusClass);});});};obj.deinitSelectors=function(){obj.selectors={};};obj.initSelectors=function(viewSlug){var selectorPrefix=obj.selectorPrefixes[viewSlug];Object.keys(obj.selectorSuffixes).forEach(function(key){obj.selectors[key]=selectorPrefix+obj.selectorSuffixes[key];});};obj.unbindEvents=function(event,jqXHR,settings){var $container=event.data.container;obj.deinitSelectors();obj.unbindMultidayEvents($container);$container.off('beforeAjaxSuccess.tribeEvents',obj.unbindEvents);};obj.bindEvents=function($container,data){var viewSlug=data.slug;var allowedViews=$container.data('tribeEventsMultidayEventsAllowedViews');if(-1===allowedViews.indexOf(viewSlug)){return;}
obj.initSelectors(viewSlug);obj.bindMultidayEvents($container);$container.on('beforeAjaxSuccess.tribeEvents',{container:$container},obj.unbindEvents);};obj.initAllowedViews=function($container){$container.trigger('beforeMultidayEventsInitAllowedViews.tribeEvents',[$container]);var theme=['month'];$container.data('tribeEventsMultidayEventsAllowedViews',theme);$container.trigger('afterMultidayEventsInitAllowedViews.tribeEvents',[$container]);};obj.init=function(event,index,$container,data){obj.initAllowedViews($container);obj.bindEvents($container,data);};obj.ready=function(){$document.on('afterSetup.tribeEvents',tribe.events.views.manager.selectors.container,obj.init);};$document.ready(obj.ready);})(jQuery,tribe.events.views.multidayEvents);